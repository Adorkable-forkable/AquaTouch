--@yuuiko wewee this took such a long time to make...----FETCH JSON SEARCH RESULT----tell application "iTunes"	set theCurrentTrackProperties to get properties of current track --@yuuiko Get currently playing song information from iTunes	set theURL to "https://itunes.apple.com/search?term=" & name of theCurrentTrackProperties & " " & artist of theCurrentTrackProperties & "&limit=1" --@yuuiko build link of the itunes website search, which only returns the first resultend tellset fixedURL to replaceText(" ", "%20", theURL) --@yuuiko emove spaces from itunes websearch and replace with "%20"set curlTask to "curl " & fixedURL --@yuuiko construct shell script command for itunes websearchset searchResult to do shell script curlTask --@yuuiko do the shell script itunes websearch and return JSON----PROCESS RETURNED JSON SEARCH RESULT------@yuuiko idk what this does exactly because I got it form https://stackoverflow.com/a/4606761 but it handles JSON files without stuff like JSON helper from the macApp Storeset AppleScript's text item delimiters to {","}set keyValueList to (every text item in searchResult) as listset AppleScript's text item delimiters to ""(*"result":"success", "image":"foo",  "name":"bar"*)--split the result i thinkrepeat with thiskeyValuePair from 1 to 13 --@yuuiko this seems to control which property it extracts		set theKeyValuePair to item thiskeyValuePair of keyValueList --@yuuiko extract the right info	end repeat----FILTER OUT THE RESULT FOR THE SONG LINK ONLY------@yuuiko thanks to https://apple.stackexchange.com/a/20135! deleting the \'s where a pain.set theKeyValuePairTrimmedStart to ((characters 23 thru -1 of theKeyValuePair) as string) --@yuuiko trim first 24? characters outset theKeyValuePairTrimmedEnd to ((characters 1 thru -2 of theKeyValuePairTrimmedStart) as string) --@yuuiko trim last 2? characters outset trackUrl to theKeyValuePairTrimmedEnd --Yay! we go the link. (sigh.. all that to get this one URL.)----OPEN THE LINK IN A NICE LITTLE SAFARI WINDOW------setup window sizeset windowHeight to 535set windowWidth to 300--get display sizetell application "Finder"	set screenResolution to bounds of window of desktopend tellset screenWidth to item 3 of screenResolutionset screenHeight to item 4 of screenResolution--open in safari with the correct window sizetell application "Safari"	make new document	activate	tell window 1		set properties of current tab to ({URL:"https://song.link/" & trackUrl})	end tell	set yAxis to (screenHeight - windowHeight) / 2 as integer	set xAxis to (screenWidth - windowWidth) / 2 as integer	set the bounds of the first window to {xAxis, yAxis, windowWidth + xAxis, windowHeight + yAxis}end tell----SCRIPT FUCNTIONS-------@yyuuiko: Find Replace functionon replaceText(find, replace, subject)	--set subject to "a"	set prevTIDs to text item delimiters of AppleScript	set text item delimiters of AppleScript to find	set subject to text items of subject		set text item delimiters of AppleScript to replace	set subject to subject as text	set text item delimiters of AppleScript to prevTIDs		return subjectend replaceText